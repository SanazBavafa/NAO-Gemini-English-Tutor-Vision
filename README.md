# NAO-Gemini-English-Tutor-Vision
NAO-based English tutor using a multimodal LLM (speech + vision). Built to explore what an aging NAO can still do, and how connecting a physical robot to an LLM + Vision model can create engaging educational interactions.
## What it does
- NAO acts as an interactive A1/A2 English tutor: it listens to the learner and responds with short, kid-friendly explanations and follow-up questions.
- The demo supports both conversation practice (speech-based tutoring) and vision-based Q&A: on a voice prompt, NAO takes a photo and answers questions about what it sees.
- All tutoring content is generated by Gemini (LLM + Vision) and returned as structured outputs that the system packages into NAO-executable actions (TTS plus optional gestures/LED cues).
- The goal is to showcase engaging educational interactions while testing what an aging NAO with a degraded battery can still do.

## Communication (NAO ↔ Host device ↔ Gemini)

### NAO ↔ Host device (local network)
NAO communicates with a host device (PC/workstation) over the local network using a lightweight file-exchange workflow (e.g., SSH/SCP).  
- NAO records the user’s voice and transfers an audio file to the host device.  
- NAO can also capture an image on demand and transfer the image file to the host device.  
- NAO periodically fetches a small “response package” from the host device and executes it.

### Host device ↔ Gemini (cloud inference)
The host device acts as the gateway to Gemini: it sends user inputs to Gemini and receives structured outputs back.  
**Speech flow (LLM tutoring):**
- The audio file received from NAO is forwarded to Gemini to be transcribed into text (speech-to-text).  
- The host device then sends a tutoring prompt to Gemini together with the transcribed text (and any needed context) to generate the next tutor response.  
- Gemini returns the response to the host device, and the host device converts it into a NAO-consumable format.

**Format host → NAO (what NAO receives)**
The host device sends NAO a structured JSON “action” file (pulled by NAO), for example:
- `say`: text NAO should speak (TTS)
- `gesture`: the gesture/animation name to play
- `led`: LED color/pattern command
- `mode` / `intent`: what kind of turn this is 
- `metadata`: any extra fields you want

NAO downloads this JSON file and performs the specified actions (speak, gesture, LEDs) in order.

**Vision flow (multimodal):**
- If the user’s spoken command indicates a vision request, NAO captures a photo and transfers the image file to the host device.  
- The host device sends Gemini a multimodal request: a vision-specific prompt plus the image.  
- Gemini returns an analysis/answer to the host device.  
- The host device again packages the result into the same JSON action format and NAO fetches it to execute (typically “say”, plus optional gesture/LED cues).

## Repo structure
- `nao_robot/`  
- `nao_robot/nao_tutor.py` — NAO-side loop (record audio, take photo, SCP/SSH transfer, fetch + execute response)

- `host/`  
- `host/nao_pipeline_server.py` — Host-side gateway (receives NAO files, calls Gemini for STT + tutoring/vision, writes NAO response files)

- `data/`  
- `data/incoming/` — Files coming from NAO (audio/image); keep folder, ignore contents  
- `data/outgoing/` — Files sent back to NAO (JSON command/response); keep folder, ignore contents  
- `data/images/` — Captured images (if you store them); keep folder, ignore contents  
- `data/processed/` — Archived/processed outputs/logs; optional, usually ignored

- `README.md` — Project overview + demo + setup + run steps  
- `requirements.txt` — Python deps for host side (and NAO side if same)  
- `.env.example` — Template for Gemini API key env vars  
- `.gitignore` — Ignore `data/**` contents, `.env`, temp audio/images, logs  


## Setup

### Prereqs
- NAO and the host device on the same network; SSH access to NAO (default is often `nao` / `nao`—change it). **Set up key-based SSH in both directions (host → NAO and NAO → host)** by generating an SSH keypair on each side and adding the public key to the other side’s `~/.ssh/authorized_keys`, so both `ssh` and `scp` work without a password prompt.
- Python installed on the host.

### Install (host)
```bash
git clone <REPO_URL>
cd <REPO>
python -m venv .venv
source .venv/bin/activate   # Windows: .venv\Scripts\activate
pip install -r requirements.txt
```

### Gemini key (host)
```bash
export GEMINI_API_KEY="YOUR_KEY"   # or GOOGLE_API_KEY
```

### Run
- Deploy NAO script:
```bash
scp nao_robot/nao_tutor.py nao@<NAO_IP>:/home/nao/
```
- Start host:
```bash
python host/nao_pipeline_server.py
```
- Start NAO (SSH into NAO):
```bash
python /home/nao/nao_tutor.py
```
